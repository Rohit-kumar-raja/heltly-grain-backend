import{_ as S}from"./AdminLayout.vue_vue_type_script_setup_true_lang-0o-pW3Ke.js";import{_ as V}from"./AppFormDialog.vue_vue_type_script_setup_true_lang-DPYi_e3c.js";import{s as C}from"./index-Dma7H0Te.js";import{s as y}from"./index-Bx9BjgNS.js";import{d as L,c as r,e,a as m,w as P,u as b,l as R,b as n,t as s,f as D,g as c,F as d,h as x,o as a,n as g,i as h,j as A,k as T}from"./app-DZLUu8s5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CM0VjVW7.js";import"./index-CfWCWr1G.js";import"./index-BVnY641-.js";import"./index-DVsAEgxI.js";import"./index-CJ0jMNSI.js";const G={class:"space-y-6"},H={class:"flex items-start justify-between flex-wrap gap-4"},O={class:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3"},U={class:"text-slate-500 dark:text-slate-400 mt-1"},z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},I={key:0,class:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 p-5"},J={class:"flex items-center gap-2 font-semibold text-lg text-slate-700 dark:text-slate-200 mb-4 border-b border-slate-100 dark:border-slate-700 pb-2"},K={class:"space-y-3"},q={class:"text-slate-500 dark:text-slate-400"},Q={class:"font-medium text-slate-700 dark:text-slate-200"},W={key:0,class:"col-span-full py-12 flex flex-col items-center justify-center text-slate-400 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-700"},X={key:0,class:"flex flex-col items-center justify-center py-16 gap-4"},Y={key:1,class:"flex flex-col items-center justify-center py-16 gap-4"},Z={key:2,class:"space-y-6"},ee={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},te={class:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 text-center"},se={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},le={class:"bg-emerald-50 dark:bg-emerald-900/20 rounded-xl p-4 text-center"},ae={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},re={class:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4 text-center"},ie={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},oe={class:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-4 text-center"},ne={class:"text-lg font-bold text-amber-600 dark:text-amber-400 capitalize"},de={class:"text-[10px] text-amber-400"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ue={class:"flex items-center gap-3 p-4"},ce={class:"flex-1 min-w-0"},xe={class:"text-[10px] font-bold uppercase tracking-widest text-slate-400 mb-0.5"},be={class:"font-semibold text-slate-800 dark:text-white text-sm truncate"},me={class:"flex gap-3 mt-1 text-[11px] text-slate-500"},ge={class:"font-bold text-slate-700 dark:text-slate-300"},fe={class:"font-bold text-blue-500"},ke={class:"font-bold text-amber-500"},ve={class:"font-bold text-rose-500"},_e={class:"mt-3 bg-slate-50 dark:bg-slate-800 rounded-xl p-3 flex justify-between items-center text-sm"},ye={class:"flex gap-4 font-semibold"},he={class:"text-slate-700 dark:text-white"},we={class:"text-blue-500"},je={class:"text-amber-500"},Ce={class:"text-rose-500"},Pe={key:0},De={class:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800 rounded-xl p-4 space-y-2"},Te={class:"text-amber-800 dark:text-amber-200"},Ne={key:1},Be={class:"flex flex-wrap gap-2"},Fe={class:"text-sm font-medium text-purple-800 dark:text-purple-200"},Me={class:"text-xs text-purple-400"},$e={key:2},Ee={class:"font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2"},Se={class:"text-xs font-normal text-slate-400"},Ve={class:"bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 divide-y divide-slate-100 dark:divide-slate-700"},Le={class:"flex items-center gap-2"},Re={class:"text-sm font-medium text-slate-700 dark:text-slate-200"},Ae={key:3,class:"bg-slate-50 dark:bg-slate-800 rounded-xl p-6 text-center"},Xe=L({layout:S,__name:"Show",props:{user:Object},setup(u){const f=u,k=T(()=>f?.user?.health_profile||{}),N=p=>p.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),B=[{key:"vitals",label:"Vitals",icon:"pi pi-heart"},{key:"body_composition",label:"Body Composition",icon:"pi pi-user"},{key:"lifestyle",label:"Lifestyle",icon:"pi pi-calendar"},{key:"nutrition_stats",label:"Nutrition",icon:"pi pi-apple"},{key:"medical_history",label:"Medical History",icon:"pi pi-briefcase"},{key:"lab_results",label:"Lab Results",icon:"pi pi-file"},{key:"mental_health",label:"Mental Health",icon:"pi pi-sun"}],v=h(!1),_=h(!1),i=h({}),F={breakfast:"pi-sun",lunch:"pi-cloud",dinner:"pi-moon",snack:"pi-apple"},M={breakfast:"from-amber-400 to-orange-500",lunch:"from-emerald-400 to-teal-500",dinner:"from-indigo-400 to-purple-500",snack:"from-rose-400 to-pink-500"},$=async()=>{v.value=!0,_.value=!0,i.value=null;try{const{data:p}=await A.get(route("app-users.diet-preview",f?.user?.id));i.value=p}catch(p){console.error("Diet preview failed:",p)}finally{_.value=!1}},E=T(()=>{if(!i.value)return 0;const p=i?.value?.user_stats?.target_calories,t=i?.value?.plan_totals?.calories;return Math.min(100,Math.round(t/p*100))});return(p,t)=>(a(),r("div",G,[e("div",H,[e("div",null,[m(b(R),{href:p.route("app-users.index")},{default:P(()=>[m(b(C),{icon:"pi pi-arrow-left",label:"Back to Users",text:"",class:"mb-2 pl-0"})]),_:1},8,["href"]),e("h1",O,[n(s(u.user?.name)+" ",1),u.user?.goal?(a(),D(b(y),{key:0,value:u.user?.goal,severity:"info",class:"text-sm"},null,8,["value"])):c("",!0)]),e("p",U,s(u.user?.email)+" • "+s(u.user?.gender)+" • "+s(u.user?.age)+" yo",1)]),m(b(C),{label:"Preview Diet Plan",icon:"pi pi-sparkles",onClick:$,class:"bg-linear-to-r! from-primary-500! to-emerald-500! border-0! rounded-xl! shadow-lg! hover:shadow-xl! transition-all!"})]),e("div",z,[(a(),r(d,null,x(B,l=>(a(),r(d,{key:l.key},[k.value[l.key]&&Object.keys(k.value[l.key]).length>0?(a(),r("div",I,[e("h3",J,[e("i",{class:g([l.icon,"text-primary-500"])},null,2),n(" "+s(l.label),1)]),e("div",K,[(a(!0),r(d,null,x(k.value[l.key],(o,w)=>(a(),r("div",{key:w,class:"flex justify-between items-center text-sm"},[e("span",q,s(N(w)),1),e("span",Q,[Array.isArray(o)?(a(!0),r(d,{key:0},x(o,j=>(a(),D(b(y),{key:j,value:j,class:"mr-1 mb-1"},null,8,["value"]))),128)):typeof o=="object"?(a(),r(d,{key:1},[n(s(JSON.stringify(o)),1)],64)):(a(),r(d,{key:2},[n(s(o),1)],64))])]))),128))])])):c("",!0)],64))),64)),f.user.health_profile?c("",!0):(a(),r("div",W,[...t[1]||(t[1]=[e("i",{class:"pi pi-file-excel text-4xl mb-3 opacity-50"},null,-1),e("p",null,"No health profile data available for this user.",-1)])]))]),m(V,{visible:v.value,"onUpdate:visible":t[0]||(t[0]=l=>v.value=l),title:"Diet Plan Preview",subtitle:`Generated for ${u.user.name}`,icon:"pi-sparkles",width:"960px",showFooter:!1},{default:P(()=>[_.value?(a(),r("div",X,[...t[2]||(t[2]=[e("i",{class:"pi pi-spin pi-spinner text-4xl text-primary-500"},null,-1),e("p",{class:"text-slate-500 font-medium"},"Generating diet plan...",-1)])])):i.value?(a(),r("div",Z,[e("div",ee,[e("div",te,[t[4]||(t[4]=e("p",{class:"text-[10px] font-bold uppercase tracking-wider text-blue-400 mb-1"},"BMR",-1)),e("p",se,s(i.value.user_stats.bmr),1),t[5]||(t[5]=e("p",{class:"text-[10px] text-blue-400"},"kcal/day",-1))]),e("div",le,[t[6]||(t[6]=e("p",{class:"text-[10px] font-bold uppercase tracking-wider text-emerald-400 mb-1"},"TDEE",-1)),e("p",ae,s(i.value.user_stats.tdee),1),t[7]||(t[7]=e("p",{class:"text-[10px] text-emerald-400"},"kcal/day",-1))]),e("div",re,[t[8]||(t[8]=e("p",{class:"text-[10px] font-bold uppercase tracking-wider text-purple-400 mb-1"},"Target",-1)),e("p",ie,s(i.value.user_stats.target_calories),1),t[9]||(t[9]=e("p",{class:"text-[10px] text-purple-400"},"kcal/day",-1))]),e("div",oe,[t[10]||(t[10]=e("p",{class:"text-[10px] font-bold uppercase tracking-wider text-amber-400 mb-1"},"Goal",-1)),e("p",ne,s(i.value.user_stats.goal),1),e("p",de,s(E.value)+"% meal fit",1)])]),e("div",null,[t[16]||(t[16]=e("h3",{class:"font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2"},[e("i",{class:"pi pi-list text-primary-500"}),n(" Suggested Meals ")],-1)),e("div",pe,[(a(!0),r(d,null,x(i.value.meals,(l,o)=>(a(),r("div",{key:o,class:"bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-xl overflow-hidden shadow-sm"},[e("div",ue,[e("div",{class:g(["w-12 h-12 rounded-xl bg-linear-to-br flex items-center justify-center shrink-0",M[o]])},[e("i",{class:g(["pi",F[o],"text-white text-lg"])},null,2)],2),e("div",ce,[e("p",xe,s(o),1),e("p",be,s(l.name),1),e("div",me,[e("span",null,[e("span",ge,s(l.calories),1),t[11]||(t[11]=n(" cal",-1))]),e("span",null,[e("span",fe,s(l.protein)+"g",1),t[12]||(t[12]=n(" P",-1))]),e("span",null,[e("span",ke,s(l.carbs)+"g",1),t[13]||(t[13]=n(" C",-1))]),e("span",null,[e("span",ve,s(l.fats)+"g",1),t[14]||(t[14]=n(" F",-1))])])])])]))),128))]),e("div",_e,[t[15]||(t[15]=e("span",{class:"font-medium text-slate-500"},"Plan Total",-1)),e("div",ye,[e("span",he,s(i.value.plan_totals.calories)+" cal",1),e("span",we,s(i.value.plan_totals.protein)+"g P",1),e("span",je,s(i.value.plan_totals.carbs)+"g C",1),e("span",Ce,s(i.value.plan_totals.fats)+"g F",1)])])]),i.value.tips.length>0?(a(),r("div",Pe,[t[18]||(t[18]=e("h3",{class:"font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2"},[e("i",{class:"pi pi-lightbulb text-amber-500"}),n(" Health Tips ")],-1)),e("div",De,[(a(!0),r(d,null,x(i.value.tips,(l,o)=>(a(),r("div",{key:o,class:"flex items-start gap-2 text-sm"},[t[17]||(t[17]=e("i",{class:"pi pi-check-circle text-amber-500 mt-0.5 shrink-0"},null,-1)),e("span",Te,s(l),1)]))),128))])])):c("",!0),i.value.recommendations.length>0?(a(),r("div",Ne,[t[20]||(t[20]=e("h3",{class:"font-bold text-slate-800 dark:text-white mb-3 flex items-center gap-2"},[e("i",{class:"pi pi-shopping-bag text-purple-500"}),n(" Product Recommendations ")],-1)),e("div",Be,[(a(!0),r(d,null,x(i.value.recommendations,l=>(a(),r("div",{key:l.id,class:"inline-flex items-center gap-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg px-3 py-2"},[t[19]||(t[19]=e("i",{class:"pi pi-box text-purple-500 text-sm"},null,-1)),e("span",Fe,s(l.name),1),e("span",Me,"₹"+s(l.price),1)]))),128))])])):c("",!0),i.value.triggered_rules.length>0?(a(),r("div",$e,[e("h3",Ee,[t[21]||(t[21]=e("i",{class:"pi pi-cog text-slate-500"},null,-1)),t[22]||(t[22]=n(" Triggered Rules ",-1)),e("span",Se,"("+s(i.value.triggered_rules.length)+" matched)",1)]),e("div",Ve,[(a(!0),r(d,null,x(i.value.triggered_rules,(l,o)=>(a(),r("div",{key:o,class:"flex items-center justify-between px-4 py-3"},[e("div",Le,[e("div",{class:g(["w-2 h-2 rounded-full",l.action_type==="calorie_adjustment"?"bg-blue-500":"bg-amber-500"])},null,2),e("span",Re,s(l.name),1)]),m(b(y),{value:l.action_type==="calorie_adjustment"?`${l.action_value>0?"+":""}${l.action_value} cal`:"Tip",severity:l.action_type==="calorie_adjustment"?"info":"warn",class:"text-xs"},null,8,["value","severity"])]))),128))])])):c("",!0),i.value.triggered_rules.length===0&&i.value.tips.length===0?(a(),r("div",Ae,[...t[23]||(t[23]=[e("i",{class:"pi pi-info-circle text-2xl text-slate-400 mb-2"},null,-1),e("p",{class:"text-sm text-slate-500"},"No smart rules triggered for this user's profile. The plan is based on default TDEE calculations.",-1)])])):c("",!0)])):(a(),r("div",Y,[...t[3]||(t[3]=[e("i",{class:"pi pi-exclamation-triangle text-4xl text-amber-500"},null,-1),e("p",{class:"text-slate-500"},"Failed to load diet preview. Please try again.",-1)])]))]),_:1},8,["visible","subtitle"])]))}});export{Xe as default};
